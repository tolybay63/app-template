#!/bin/sh
set -e  



# Инициализация сторонних сервисов

if [[ "$(uname)" == "Darwin" ]]; then
  echo -------
  echo test-ldap

  cd test-ldap

  ./init
  echo test users dowloaded
  cd ..
else
  echo done
fi

echo -------
echo app-keycloak

cd app-keycloak

./init

cd ..



echo -------
echo app-database

cd app-database

./init

cd ..



echo -------
echo app-storage

cd app-storage

./init

cd ..



echo -------
echo app-messagebroker

cd app-messagebroker

./init

cd ..



# Инициализация бизнес-логики



echo -------
echo app-database

cd ../app-database


# Создаёт структуру БД
./gradlew bootRun

#
if [[ "$(uname)" == "Darwin" ]]; then
  echo "Тут должен быть chmod чего то там"
else
  chmod 777 -R ./build
fi


cd ../init


